{% extends "base.html" %}

{% block title %}Kan Ban{% endblock %}

{% block head %}
    <link href="/static/js/dragula/dragula.css" rel="stylesheet" media="screen">
    <script src="/static/js/dragula/dragula.min.js"></script>
{% endblock %}

 {% block content %}

<div class="row mt-3">
    <div class="col-12 text-center">
        <h2>Kan Ban Board</h2>
    </div>
</div>

<div class="row mt-5">
    <div class="col-3"><h5>BackLog</h5></div>
    <div class="col-3"><h5>Planning</h5></div>
    <div class="col-3"><h5>In-Progress</h5></div>
    <div class="col-3"><h5>Complete</h5></div>
</div>


<div class="row mt-5">

    <div class="col-3" id="BackLogLane">

         {% for task in model.backlog_data %}

            <div class="card" id="taskCard{{ task.id }}" style="width: 18rem;">
                <div class="card-body">
                    <h5 class="card-title" id="task{{ task.id }}-title">{{ task.title|e }}</h5>
                    <p class="card-text" id="task{{ task.id }}-description">
                        {{ task.description|e }}
                    </p>
                    <div id="task{{ task.id }}-tags">
                        {% for tag in task.tags %}
                         <span class="badge bg-primary">{{ tag.value }}</span>
                        {% endfor %}
                    </div>
                </div>
                <div class="card-footer">
                    <a href="/task/edit/{{ task.id }}" data-task-edit title="Edit Task"><i task-id="{{ task.id }}" class="bi-pencil-square" style="font-size: .9rem; color: cornflowerblue;"></i></a>
                    <a href="#" data-task-delete title="Delete Task"><i task-id="{{ task.id }}" class="bi-trash ms-3" style="font-size: .9rem; color: cornflowerblue;"></i></a>
                </div>
            </div>

         {% endfor %}

    </div>
    <div class="col-3" id="PlanningLane">

         {% for task in model.planning_data %}

             <div class="card" id="taskCard{{ task.id }}" style="width: 18rem;">
                <div class="card-body">
                    <h5 class="card-title" id="task{{ task.id }}-title">{{ task.title|e }}</h5>
                    <p class="card-text" id="task{{ task.id }}-description">
                        {{ task.description|e }}
                    </p>
                    <div id="task{{ task.id }}-tags">
                        {% for tag in task.tags %}
                         <span class="badge bg-primary">{{ tag.value }}</span>
                        {% endfor %}
                    </div>
                </div>
                <div class="card-footer">
                    <a href="/task/edit/{{ task.id }}" data-task-edit title="Edit Task"><i task-id="{{ task.id }}" class="bi-pencil-square" style="font-size: .9rem; color: cornflowerblue;"></i></a>
                    <a href="#" data-task-delete><i task-id="{{ task.id }}" class="bi-trash ms-3" style="font-size: .9rem; color: cornflowerblue;"></i></a>
                </div>
             </div>

         {% endfor %}

    </div>
    <div class="col-3" id="InProgressLane">
        {% for task in model.inprogress_data %}
            <div class="card" id="taskCard{{ task.id }}" style="width: 18rem;">
                <div class="card-body">
                    <h5 class="card-title" id="task{{ task.id }}-title">{{ task.title|e }}</h5>
                    <p class="card-text" id="task{{ task.id }}-description">
                        {{ task.description|e }}
                    </p>
                    <div id="task{{ task.id }}-tags">
                        {% for tag in task.tags %}
                         <span class="badge bg-primary">{{ tag.value }}</span>
                        {% endfor %}
                    </div>
                </div>
                <div class="card-footer">
                    <a href="/task/edit/{{ task.id }}" data-task-edit title="Edit Task"><i task-id="{{ task.id }}" class="bi-pencil-square" style="font-size: .9rem; color: cornflowerblue;"></i></a>
                    <a href="#" data-task-delete><i task-id="{{ task.id }}" class="bi-trash ms-3" style="font-size: .9rem; color: cornflowerblue;"></i></a>
                </div>
            </div>
        {% endfor %}

    </div>
    <div class="col-3" id="CompleteLane">
        {% for task in model.complete_data %}
            <div class="card" id="taskCard{{ task.id }}" style="width: 18rem;">
                <div class="card-body">
                    <h5 class="card-title" id="task{{ task.id }}-title">{{ task.title|e }}</h5>
                    <p class="card-text" id="task{{ task.id }}-description">
                        {{ task.description|e }}
                    </p>
                    <div id="task{{ task.id }}-tags">
                        {% for tag in task.tags %}
                         <span class="badge bg-primary">{{ tag.value }}</span>
                        {% endfor %}
                    </div>
                </div>
                <div class="card-footer">
                    <a href="/task/edit/{{ task.id }}" data-task-edit title="Edit Task"><i task-id="{{ task.id }}" class="bi-pencil-square" style="font-size: .9rem; color: cornflowerblue;"></i></a>
                    <a href="#" data-task-delete><i task-id="{{ task.id }}" class="bi-trash ms-3" style="font-size: .9rem; color: cornflowerblue;"></i></a>
                </div>
            </div>
        {% endfor %}

    </div>
</div>

<div class="row mt-5">
    <div class="col-3">
        <a href="/task" class="btn btn-primary">
            Add Task
        </a>
    </div>
    <div class="offset-9"></div>

</div>


{% endblock %}

{% block scripts %}
    <script async type="module"  src="/static/js/kanban.js"></script>
{% endblock %}